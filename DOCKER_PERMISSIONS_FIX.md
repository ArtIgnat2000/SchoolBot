# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ Docker –Ω–∞ Synology

## ‚ùå –û—à–∏–±–∫–∞
```
permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock
```

## üéØ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ sudo (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–ª—è Synology)
```bash
# –í–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
bash deploy-synology.sh

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sudo (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞)
sudo bash deploy-synology.sh
```

### –†–µ—à–µ–Ω–∏–µ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ Docker socket (–ü—Ä–æ—Å—Ç–æ–µ)
```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ Docker socket
sudo chmod 666 /var/run/docker.sock

# –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ sudo
bash deploy-synology.sh
```

### –†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É docker (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö –º–æ–∂–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å):

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Synology)
sudo usermod -aG docker $USER

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
sudo adduser $USER docker

# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–ª—è Synology (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
sudo synogroup --add docker $USER

# –í–ê–ñ–ù–û: –ü–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
exit
ssh admin@your_synology_ip
```

### –†–µ—à–µ–Ω–∏–µ 4: –ß–µ—Ä–µ–∑ Container Manager GUI (–ù–∞–¥–µ–∂–Ω–æ–µ)
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Container Manager** –≤ DSM
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Project** ‚Üí **Create**
3. –£–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º: `/volume1/docker/school-bot/`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª: `docker-compose.synology.yml`
5. –ù–∞–∂–º–∏—Ç–µ **Build** –∏ –∑–∞—Ç–µ–º **Start**

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `deploy-synology.sh` —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ Docker
2. **–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è** –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã
3. **–ú–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å** –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
bash deploy-synology.sh
# –°–∫—Ä–∏–ø—Ç –æ–±–Ω–∞—Ä—É–∂–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã:
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ sudo
# 2. –î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É docker
# 3. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∞–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤ –∫–∞–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö —Å–æ—Å—Ç–æ–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
groups $USER

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≥—Ä—É–ø–ø–∞ "docker"
# –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ usermod

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Docker
docker info
# –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ sudo - –ø—Ä–∞–≤–∞ –≤ –ø–æ—Ä—è–¥–∫–µ
```

## üè† –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Synology

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è DSM (DiskStation Manager)
- –ö–æ–º–∞–Ω–¥–∞ `usermod` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö DSM
- –ü—Ä–∞–≤–∞ –Ω–∞ Docker —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Container Manager
- –ù–µ –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Linux –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã

### Synology-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∞–º–∏
command -v usermod    # –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
command -v adduser    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
command -v synogroup  # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è Synology

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏:
sudo adduser $USER docker
sudo synogroup --add docker $USER
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è Synology:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo
```bash
# –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±
sudo bash deploy-synology.sh
sudo docker ps
sudo docker logs school-bot
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ socket
```bash
# –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å (–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
sudo chmod 666 /var/run/docker.sock

# –ó–∞—Ç–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ sudo
bash deploy-synology.sh
docker ps
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Container Manager GUI
1. **Package Center** ‚Üí **Container Manager** 
2. **Project** ‚Üí **Create**
3. –£–∫–∞–∑–∞—Ç—å –ø—É—Ç—å: `/volume1/docker/school-bot/`
4. –í—ã–±—Ä–∞—Ç—å: `docker-compose.synology.yml`
5. **Build** ‚Üí **Start**

## üöÄ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤:
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:

# 1. –î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# 2. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ socket (–≤—Ä–µ–º–µ–Ω–Ω–æ)
sudo chmod 666 /var/run/docker.sock

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø
docker info

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
bash deploy-synology.sh
```

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo –¥–ª—è –≤—Å–µ—Ö Docker –∫–æ–º–∞–Ω–¥
sudo bash deploy-synology.sh
sudo docker ps
sudo docker logs school-bot
sudo docker-compose -f docker-compose.synology.yml down
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π:

```bash
# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫:
docker info
docker ps
docker-compose version

# –ï—Å–ª–∏ –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ - –∑–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞:
bash deploy-synology.sh
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –ß–µ—Ä–µ–∑ Container Manager GUI:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Container Manager
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project 
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å docker-compose.synology.yml
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ß–µ—Ä–µ–∑ Portainer (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
1. –û—Ç–∫—Ä–æ–π—Ç–µ Portainer –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Stacks
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π stack —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º docker-compose.synology.yml
4. Deploy stack

## üìû –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Container Manager**:
   - Package Center ‚Üí Container Manager ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—É—â–µ–Ω

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker**:
   ```bash
   sudo systemctl restart docker
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Docker**:
   ```bash
   sudo journalctl -u docker
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sudo –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö**:
   ```bash
   sudo bash deploy-synology.sh
   ```

---

**üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è Synology NAS –ª—É—á—à–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sudo bash deploy-synology.sh` - —ç—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–∞–≤–∞–º–∏.